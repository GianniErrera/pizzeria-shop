<div>
<section class="home-slider owl-carousel img" style="background-image: url(images/bg_1.jpg);">
    <div class="slider-item">
        <div class="overlay"></div>
      <div class="container">
        <div class="row slider-text align-items-center" data-scrollax-parent="true">

          <div class="col-md-6 col-sm-12 ftco-animate">
              <span class="subheading">Delicious</span>
            <h1 class="mb-4">Italian Cuisine</h1>
            <p class="mb-4 mb-md-5">Wide range of pasta and salads.</p>
            <p><a href="#" class="btn btn-primary p-3 px-xl-4 py-xl-3">Order Now</a> <a href="#" class="btn btn-white btn-outline-white p-3 px-xl-4 py-xl-3">View Menu</a></p>
          </div>
          <div class="col-md-6 ftco-animate">
              <img src="images/bg_1.png" class="img-fluid" alt="">
          </div>

        </div>
      </div>
    </div>

    <div class="slider-item">
        <div class="overlay"></div>
      <div class="container">
        <div class="row slider-text align-items-center" data-scrollax-parent="true">

          <div class="col-md-6 col-sm-12 order-md-last ftco-animate">
              <span class="subheading">Crunchy</span>
            <h1 class="mb-4">Italian Pizza</h1>
            <p class="mb-4 mb-md-5">The best pizza in town. Just yummy!</p>
            <p><a href="#" class="btn btn-primary p-3 px-xl-4 py-xl-3">Order Now</a> <a href="#" class="btn btn-white btn-outline-white p-3 px-xl-4 py-xl-3">View Menu</a></p>
          </div>
          <div class="col-md-6 ftco-animate">
              <img src="images/bg_2.png" class="img-fluid" alt="">
          </div>

        </div>
      </div>
    </div>

    <div class="slider-item" style="background-image: url(images/bg_3.jpg);">
        <div class="overlay"></div>
      <div class="container">
        <div class="row slider-text justify-content-center align-items-center" data-scrollax-parent="true">

          <div class="col-md-7 col-sm-12 text-center ftco-animate">
              <span class="subheading">Welcome</span>
            <h1 class="mb-4">We cooked your desired Pizza Recipe</h1>
            <p class="mb-4 mb-md-5">The best Italian food prepared with love from us to you</p>
            <p><a href="#" class="btn btn-primary p-3 px-xl-4 py-xl-3">Order Now</a> <a href="#" class="btn btn-white btn-outline-white p-3 px-xl-4 py-xl-3">View Menu</a></p>
          </div>

        </div>
      </div>
    </div>
</section>

<section class="ftco-intro">
    <div class="container-wrap">
        <div class="wrap d-md-flex">
            <div class="info">
                <div class="row no-gutters">
                    <div class="col-md-4 d-flex ftco-animate">
                        <div class="icon"><span class="icon-phone"></span></div>
                        <div class="text">
                            <h3>000 (123) 456 7890</h3>
                            <p>A small river named Duden flows</p>
                        </div>
                    </div>
                    <div class="col-md-4 d-flex ftco-animate">
                        <div class="icon"><span class="icon-my_location"></span></div>
                        <div class="text">
                            <h3>198 West 21th Street</h3>
                            <p>Suite 721 New York NY 10016</p>
                        </div>
                    </div>
                    <div class="col-md-4 d-flex ftco-animate">
                        <div class="icon"><span class="icon-clock-o"></span></div>
                        <div class="text">
                            <h3>Open Monday-Friday</h3>
                            <p>8:00am - 9:00pm</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="social d-md-flex pl-md-5 p-4 align-items-center">
                <ul class="social-icon">
          <li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
          <li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>
          <li class="ftco-animate"><a href="#"><span class="icon-instagram"></span></a></li>
        </ul>
            </div>
        </div>
    </div>
</section>

<section class="ftco-about d-md-flex">
    <div class="one-half img" style="background-image: url(images/about.jpg);"></div>
    <div class="one-half ftco-animate">
    <div class="heading-section ftco-animate ">
      <h2 class="mb-4">Welcome to <span class="flaticon-pizza">Pizzeria da Gianni</span> ITalian restaurant</h2>
    </div>
    <div>
              <p>Only the best recipes from Italian regional cuisine, prepared from food experts. Our goal is that of keeping our customers satisfied, everyone who has tried our specialities always comes back!</p>
          </div>
    </div>
</section>

<section class="ftco-section ftco-services">
    <div class="overlay"></div>
    <div class="container">
        <div class="row justify-content-center mb-5 pb-3">
      <div class="col-md-7 heading-section ftco-animate text-center">
        <h2 class="mb-4">Our Services</h2>
        <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts.</p>
      </div>
    </div>
        <div class="row">
      <div class="col-md-4 ftco-animate">
        <div class="media d-block text-center block-6 services">
          <div class="icon d-flex justify-content-center align-items-center mb-5">
              <span class="flaticon-diet"></span>
          </div>
          <div class="media-body">
            <h3 class="heading">Healthy Foods</h3>
            <p>Even the all-powerful Pointing has no control about the blind texts it is an almost unorthographic.</p>
          </div>
        </div>
      </div>
      <div class="col-md-4 ftco-animate">
        <div class="media d-block text-center block-6 services">
          <div class="icon d-flex justify-content-center align-items-center mb-5">
              <span class="flaticon-bicycle"></span>
          </div>
          <div class="media-body">
            <h3 class="heading">Fastest Delivery</h3>
            <p>Even the all-powerful Pointing has no control about the blind texts it is an almost unorthographic.</p>
          </div>
        </div>
      </div>
      <div class="col-md-4 ftco-animate">
        <div class="media d-block text-center block-6 services">
          <div class="icon d-flex justify-content-center align-items-center mb-5"><span class="flaticon-pizza-1"></span></div>
          <div class="media-body">
            <h3 class="heading">Original Recipes</h3>
            <p>Even the all-powerful Pointing has no control about the blind texts it is an almost unorthographic.</p>
          </div>
        </div>
      </div>
    </div>
    </div>
</section>

  <section class="ftco-section">
       <div class="container">
           <div class="row justify-content-center mb-5 pb-3">
                <div class="col-md-7 heading-section ftco-animate text-center">
                <h2 class="mb-4">Our pizzas</h2>
                <p>These are some of our most popular pizzas</p>
                </div>
            </div>
       </div>
       <div class="container-wrap">
            <div class="row no-gutters d-flex">
                @forelse($pizzas as $pizza)
                    <div class="col-lg-4 d-flex ftco-animate">
                        <div class="services-wrap d-flex">
                            <!-- big screens layout display 3 pizzas in a row, and each rows has image aligned to left or right alternatively to form a checkboard pattern -->
                            <a href="#"
                                class="img {{ $loop->index  % 6 <= 2  ? ' order-lg-last' : '' }}"
                                @if($pizza->image)
                                        style="background-image: url({{asset('storage/' . $pizza->image)}});"
                                @else
                                        style="background-image: url(https://picsum.photos/1000/900);"
                                @endif
                                ></a>
                            <div class="text p-4">
                                <h3>{{$pizza->name}}</h3>
                                <p @media (min-width: 1200px) { style="height:5rem; overflow:hidden;  text-overflow: ellipsis;" }>{{ $pizza->description }} </p>
                                <p class="price"><span>€{{ $pizza->price }}</span> <a href="{{route("product.show", ['product' => $pizza])}}" class="ml-2 btn btn-white btn-outline-white">Order</a></p>
                            </div>
                        </div>
                    </div>
                @empty
                <h2>No pizzas found</h2>
                @endforelse
            </div>
      </div>
      <div class="container">
          <div class="row justify-content-center mb-5 pb-3 mt-5 pt-5">
        <div class="col-md-7 heading-section text-center ftco-animate">
          <h2 class="mb-4">Our Menu Pricing</h2>
          <p class="flip"><span class="deg1"></span><span class="deg2"></span><span class="deg3"></span></p>
          <p class="mt-5">Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts.</p>
        </div>
      </div>
      <div class="row">
          <!-- first we divide all record in two columns, then we create two columns to display the pizzas -->
          @php
           $number_pizzas_per_row = ceil(count($pizzas) / 2)
          @endphp

              @forelse($pizzas as $pizza)
                  @if($loop->first || $loop->index == $number_pizzas_per_row) <!-- this line checks if element is the first in its column so div may be opened -->
                      <div class="col-md-6"> <!-- <- this opens the div tag -->
                          <div class="pricing-entry d-flex ftco-animate">
                              <div class="img"
                                  @if($pizza->image)
                                      style="background-image: url({{asset('storage/' . $pizza->image)}});"
                                  @else
                                      style="background-image: url(https://picsum.photos/1000/900);"
                                  @endif
                              ></div>
                              <div class="desc pl-3">
                                  <div class="d-flex text align-items-center">
                                      <h3><span>{{ $pizza->name }}</span></h3>
                                      <span class="price">€{{ $pizza->price }}</span>
                                  </div>
                                  <div class="d-block" style="height:5rem; overflow:hidden;  text-overflow: ellipsis;">
                                      <p>{{ $pizza->description }}</p>
                                  </div>
                              </div>
                          </div>
                  @elseif($loop->last || $loop->index + 1 == $number_pizzas_per_row) <!-- this line checks if element is the last in its column so div may be closed -->
                          <div class="pricing-entry d-flex ftco-animate">
                              <div class="img"
                                  @if($pizza->image)
                                      style="background-image: url({{asset('storage/' . $pizza->image)}});"
                                  @else
                                      style="background-image: url(https://picsum.photos/1000/900);"
                                  @endif
                              ></div>
                              <div class="desc pl-3">
                                  <div class="d-flex text align-items-center">
                                      <h3><span>{{ $pizza->name }}</span></h3>
                                      <span class="price">€{{ $pizza->price }}</span>
                                  </div>
                                  <div class="d-block" style="height:5rem; overflow:hidden;  text-overflow: ellipsis;">
                                      <p>{{ $pizza->description }}</p>
                                  </div>
                              </div>
                          </div>
                      </div>  <!-- <- this closes the div tag -->
                  @else($loop->last || $loop->index == $number_pizzas_per_row) <!-- this line checks if element is the last in its column so div may be closed -->
                      <div class="pricing-entry d-flex ftco-animate">
                          <div class="img"
                              @if($pizza->image)
                                  style="background-image: url({{asset('storage/' . $pizza->image)}});"
                              @else
                                  style="background-image: url(https://picsum.photos/1000/900);"
                              @endif
                          ></div>
                          <div class="desc pl-3">
                              <div class="d-flex text align-items-center">
                                  <h3><span>{{ $pizza->name }}</span></h3>
                                  <span class="price">€{{ $pizza->price }}</span>
                              </div>
                              <div class="d-block" style="height:5rem; overflow:hidden;  text-overflow: ellipsis;">
                                  <p>{{ $pizza->description }}</p>
                              </div>
                          </div>
                      </div>
                  @endif
              @empty
              <h2>No pizzas found</h2>
              @endforelse
          </div>


        </div>
      </div>
  </section>

  <section class="ftco-gallery">
      <div class="container-wrap">
          <div class="row no-gutters">
                  <div class="col-md-3 ftco-animate">
                      <a href="#" class="gallery img d-flex align-items-center" style="background-image: url(images/gallery-1.jpg);">
                          <div class="icon mb-4 d-flex align-items-center justify-content-center">
                          <span class="icon-search"></span>
                      </div>
                      </a>
                  </div>
                  <div class="col-md-3 ftco-animate">
                      <a href="#" class="gallery img d-flex align-items-center" style="background-image: url(images/gallery-2.jpg);">
                          <div class="icon mb-4 d-flex align-items-center justify-content-center">
                          <span class="icon-search"></span>
                      </div>
                      </a>
                  </div>
                  <div class="col-md-3 ftco-animate">
                      <a href="#" class="gallery img d-flex align-items-center" style="background-image: url(images/gallery-3.jpg);">
                          <div class="icon mb-4 d-flex align-items-center justify-content-center">
                          <span class="icon-search"></span>
                      </div>
                      </a>
                  </div>
                  <div class="col-md-3 ftco-animate">
                      <a href="#" class="gallery img d-flex align-items-center" style="background-image: url(images/gallery-4.jpg);">
                          <div class="icon mb-4 d-flex align-items-center justify-content-center">
                          <span class="icon-search"></span>
                      </div>
                      </a>
                  </div>
          </div>
      </div>
  </section>


  <section class="ftco-counter ftco-bg-dark img" id="section-counter" style="background-image: url(images/bg_2.jpg);" data-stellar-background-ratio="0.5">
      <div class="overlay"></div>
    <div class="container">
      <div class="row justify-content-center">
          <div class="col-md-10">
              <div class="row">
                <div class="col-md-6 col-lg-3 d-flex justify-content-center counter-wrap ftco-animate">
                  <div class="block-18 text-center">
                    <div class="text">
                        <div class="icon"><span class="flaticon-pizza-1"></span></div>
                        <strong class="number" data-number="100">0</strong>
                        <span>Pizza Branches</span>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 col-lg-3 d-flex justify-content-center counter-wrap ftco-animate">
                  <div class="block-18 text-center">
                    <div class="text">
                        <div class="icon"><span class="flaticon-medal"></span></div>
                        <strong class="number" data-number="85">0</strong>
                        <span>Number of Awards</span>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 col-lg-3 d-flex justify-content-center counter-wrap ftco-animate">
                  <div class="block-18 text-center">
                    <div class="text">
                        <div class="icon"><span class="flaticon-laugh"></span></div>
                        <strong class="number" data-number="10567">0</strong>
                        <span>Happy Customer</span>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 col-lg-3 d-flex justify-content-center counter-wrap ftco-animate">
                  <div class="block-18 text-center">
                    <div class="text">
                        <div class="icon"><span class="flaticon-chef"></span></div>
                        <strong class="number" data-number="900">0</strong>
                        <span>Staff</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
      </div>
    </div>
  </section>


  <section class="ftco-menu mb-4">
      <div class="container-fluid">
          <div class="row d-md-flex">
              <div class="col-lg-4 ftco-animate img f-menu-img mb-5 mb-md-0" style="background-image: url(images/about.jpg);">
              </div>
              <div class="col-lg-8 ftco-animate p-md-5">
                  <div class="row">
                      <div class="col-md-12 nav-link-wrap mb-5">
                          <div class="nav ftco-animate nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                              @forelse($categories as $category)
                                  <a class="nav-link {{$loop->first ? 'active' : '' }} "
                                      id="v-pills-{{$loop->index + 1}}-tab"
                                      data-toggle="pill"
                                      href="#v-pills-{{$loop->index + 1}}"
                                      role="tab"
                                      aria-controls="v-pills-{{$loop->index + 1}}"
                                      aria-selected="{{$loop->index == 0 ? 'true' : 'false' }}">

                                      {{ucfirst($category->name)}}
                                  </a>
                              @empty
                              @endforelse
                          </div>
                      </div>
                      <div class="col-md-12 d-flex align-items-center">
                          <div class="tab-content ftco-animate" id="v-pills-tabContent">

                              @forelse ($categories as $category)
                                  <div class="tab-pane fade {{ $loop->first ? 'show active' : '' }}" style="overflow-x:hidden" id="v-pills-{{$loop->index + 1}}" role="tabpanel" aria-labelledby="v-pills-{{$loop->index + 1}}-tab">
                                      <div class="row">
                                          @forelse ($category->products as $product)
                                              <div class="col-md-4 text-center">
                                                  <div class="menu-wrap">
                                                      <a href="{{route("product.show", ['product' => $product])}}" class="menu-img img mb-4"
                                                      @if($product->image)
                                                      style="background-image: url({{asset('storage/' . $product->image)}});"
                                                      @else style="background-image: url(https://picsum.photos/200/300);"
                                                      @endif
                                                      ></a>
                                                      <div class="text">
                                                          <h3><a href="#">{{ $product->name }}</a></h3>
                                                          <div class="container-fluid" style="height:5rem; overflow:hidden;  text-overflow: ellipsis;">
                                                          <p>{{ str_pad($product->description, 120, " ")}}</p>
                                                          </div>

                                                          <p class="price"><span>€{{$product->price}}</span></p>
                                                          <p><a href="{{route("product.show", ['product' => $product])}}" class="btn btn-white btn-outline-white">Add to cart</a></p>
                                                      </div>
                                                  </div>
                                              </div>
                                          @empty
                                              <div class="p-4">
                                                  <h5>No products in this category</h5>
                                              </div>
                                          @endforelse

                                      </div>
                                  </div>

                              @empty

                              @endforelse

                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>

  </section>

  </section class="ftco-section">
    <div class="container-fluid " id="cart">
        <!-- Orderlines list -->
        @forelse ($orderlines as $orderline)
            <div class="border p-2" style="border-width:thick">
                <div class="d-fles">
                    <h4>{{ucfirst($orderline->product->category->name)}}</h4>
                </div>
                <div class="d-flex justify-content-between">

                    <div class="col">
                        <h4>{{ $orderline->quantity }} {{ $orderline->product->name }}</h4>
                    </div>
                    <div class="col"> € {{ $orderline->product->price }}</div>
                    <div class="col"> € {{ (int)$orderline->quantity * (float)$orderline->product->price }}
                    </div>

                </div>
                <div>
                    @foreach ($orderline->orderExtras as $extraLine)
                    <div class="d-flex justify-content-between">
                        <div class="col">-- {{ $orderline->quantity }} {{ $extraLine->extra->name }}</div>
                        <div class="col">€ {{ $extraLine->extra->price }}</div>
                        <div class="col">€ {{$extraLine->extra->price * $orderline->quantity}} </div>
                    </div>
                    @endforeach
                    <hr>
                    <div class="d-flex justify-content-between mt-2">
                        <div class="col">total</div>
                        <div class="col"></div>
                        <div class="col">
                            <h5>€ {{ $orderline->totalPrice() }}</h5>
                        </div>
                    </div>
                </div>
                <!-- Buttons -->
                <div class="d-flex justify-content-end my-2">

                        <form action="/orderlines/{{$orderline->id}}">
                            <button class="btn btn-primary">Modify order</button>
                        </form>
                        <!-- Empry div used for spacing two buttons -->
                        <div class="mx-1">
                        </div>

                        <form
                            action="orderlines/{{$orderline->id}}"
                            method="POST">
                            @csrf
                            @method("DELETE")
                            <button class="btn btn-danger ml-1" onclick="return confirm('Are you sure?')">Cancel order</button>
                        </form>

                </div>
                <!-- End buttons -->
            </div>

        @empty

            <div class="mb-5 d-flex justify-content-center">
                <span class="text-center">
                        <i>
                            <h1 style="color:#fac564" class="mx-auto heading-section span">
                                Your cart is empty
                            </h1>
                        </i>
                </span>
            </div>

        @endforelse

        <!-- End orderlines list -->

        <!-- Total prices -->

        @if($orderlines->count())
            <div class ="d-flex justify-content-between my-2">
                <div class="col">
                    <h1>Total</h1>
                </div>
                <div class="col">
                </div>
                <div class="col">
                    @if($order)
                        <h3>€{{$order->totalPrice()}}</h3>
                    @endif
                </div>
            </div>
        @endif
        <!-- End total prices -->


        <div class="d-flex justify-content-end my-3 mr-4">
            <div class="row">
                @if($order)
                    <form
                        action="orders/{{session('order_id')}}"
                        method="POST">
                        @csrf
                        @method("DELETE")
                        <button class="btn btn-danger ml-1" onclick="return confirm('Are you sure?')">Clear shopping cart</button>
                    </form>
                    <!-- Empry div used for spacing two buttons -->
                    <div class="mx-1">
                    </div>
                    <a class="btn btn-primary"
                        href="{{route('user.form', ['order' => $order->id ])}}"> <!-- user is prompted to fill in a form -->
                        Place order
                    </a>
                @endif
            </div>
        </div>
    </div>

    </section>






</div>
